---
layout: article
title:  "通过数据透视表实现多表关联"
date:   2018-01-09
categories: posts infovis
image:
  teaser: tableau.jpg
---
---
怎样使用好Tableau的数据透视以及多表的关联，是不是常常为自己处理不好数据而烦恼，看了这篇文章你会有一定提升。

--------
# 处理数据的传统方式以及新的方式
企业级的数据处理过程中，如果没有相应的数据库，通常是用 Excel 来处理数据；即便有了数据库，通常出于数据安全考虑，并不能直接连接数据库，而是利用一些工具，提取出相应的数据。

用来做分析的数据源，一般情况会是如下格式：
![image](https://luojihao.github.io/images/i1.jpg)

在我们日常查看的报表中，很多都是这样格式的。因为这样的表看起来非常直观，能清晰的看到每个区域每一年的值。

但是，在我们使用 Tableau 连接这个数据源时，读取的数据会这样显示：
![image](https://luojihao.github.io/images/i2.jpg)

由于 Tableau 是以列式的方式读取数据的，所以在读取数据的时候也是通过一列一列的方式读取，就会导致三年的数据分别放到了三个度量上。

反映在图形呈现中，就会出现以下这种情况：
![image](https://luojihao.github.io/images/i3.jpg)

这不是我们想要的，这个时候我们就需要用 Tableau 里面的数据透视功能对原数据做一定的处理。

我们通过 Ctrl 或者 Shift 选择需要数据透视的数据，然后对着数据标题右键，选择数据透视表即可。这时候，时间会变成一个维度，表里面的值会变成一个度量。

我们会根据不同类别分开存放数据。假如，我们有两个表（如下图），该如何把这两个表关联，并方便Tableau做分析呢？
![image](https://luojihao.github.io/images/i4.jpg)

## 通过数据透视表实现多表关联。

是把数据完全交给 Tableau 去处理，具体步骤如下：


➀ 首先，用 Tableau 读取第一个表格，进行数据透视。重命名数据透视后的标题。

➁ 点击数据提取，把数据透视后的数据提取到tde格式文件中。
![image](https://luojihao.github.io/images/i5.jpg)

➂ 用tableau重新连接第二个表格，做数据透视处理。

➃ 然后连接刚刚用第一个表格生成的 tde 文件（如下图）。这样，我们就把两个表的数据连接到一起了！
![image](https://luojihao.github.io/images/i6.jpg)